var button=document.querySelector(".button-form"),popup=document.querySelector(".write-us-form"),yourName=popup.querySelector("[name=your-name]"),email=popup.querySelector("[name=email]"),text=popup.querySelector("[name=letter]"),close=popup.querySelector(".form-close"),form=document.querySelector(".write-us-form"),isStorageSupport=!0,storageName="",storageEmail="";try{storageName=localStorage.getItem("yourName"),storageEmail=localStorage.getItem("email")}catch(e){isStorageSupport=!1}popup.classList.remove("form-show"),button.addEventListener("click",function(e){e.preventDefault(),popup.classList.remove("form-error"),popup.classList.add("form-show"),yourName.focus(),storageName&&(yourName.value=storageName,email.focus()),storageEmail&&(email.value=storageEmail,text.focus())}),close.addEventListener("click",function(e){popup.classList.remove("form-show")}),form.addEventListener("submit",function(e){yourName.value&&email.value&&text.value?isStorageSupport&&(localStorage.setItem("yourName",yourName.value),localStorage.setItem("email",email.value)):(e.preventDefault(),console.log("Нужно ввести имя, эл. почту и текст сообщения"),popup.classList.remove("form-error"),popup.offsetWidth=popup.offsetWidth,popup.classList.add("form-error"))});
